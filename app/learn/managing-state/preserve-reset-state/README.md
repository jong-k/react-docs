# State를 보존하고 초기화하기

## State 는 렌더트리의 위치에 연결 됩니다

- 예시) `DoubleCounter.tsx`
- 컴포넌트가 렌더트리에서 제거되면, 상태도 함께 제거된다
- 따라서, 2번째 Counter 를 지웠다가 다시 렌더링시키면, 카운터 숫자 state가 기본값으로 초기화된다

## 같은 자리의 같은 컴포넌트는 state를 보존합니다

- 예시) `FancyCounter.tsx`
- `<div>` 의 1번째 자식 컴포넌트라는 것이 변하지 않는다면 (컴포넌트의 위치가 바뀌지 않으면) state는 보존된다
- 여기서 `위치`는 JSX 마크업이 아닌, UI 트리에서의 위치를 의미한다

## 같은 위치의 다른 컴포넌트는 state를 초기화합니다

- 예시) `ChildrenFancyCounter.tsx`
- 같은 위치에서 컴포넌트가 바뀌면, state는 초기화된다
- 기존 컴포넌트가 제거될 때 자식 컴포넌트가 있었다면, 하위의 모든 자식 컴포넌트들도 제거된다 (마찬가지로 state도 초기화된다)

## 컴포넌트 내부에서 다른 컴포넌트를 정의하면 안되는 이유

- 컴포넌트1이 상태 A 및 내부에서 컴포넌트2를 정의하고 있다고 가정한다
- 이 때, 컴포넌트2는 상태 A를 바꾸는 버튼을 갖고 있다고 할때,
- 컴포넌트2의 버튼을 클릭하여 상태 A를 바꾸게 되면, 컴포넌트2도 재정의되며(메모리 주소 달라짐) 컴포넌트2가 갖던 상태가 초기화된다
- 따라서 컴포넌트는 항상 최상위 범위에서 정의해야 한다
